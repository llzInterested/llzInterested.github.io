---
title: Linux学习记录01
date: 2018-08-24 16:26:45
categories: 
    - Linux
tags: 
    - Linux
---
# 虚拟机网络连接三种方式
- 桥连接
- NAT
- 主机模式

![虚拟机网络连接三种方式](https://note.youdao.com/yws/api/personal/file/E0AB5B2165C245D68AA8349D5DECC7F0?method=download&shareKey=fc3e8821a960abb4213ee0692c3f213d)

# 基础
## 安装vmtools
- 可以直接粘贴命令在windows 和 centos系统之间
- 可以设置windows和centos的共享文件夹

## 设置共享文件夹
菜单栏 -> 虚拟机 -> 设置 -> 选项 -> 共享文件夹
linux中共享文件夹在 ==`/mnt/hgfs/`== 下 

## 目录结构
- ==bin==：存放指令
- ==home==：存放普通用户的主目录，在linux中每个用户都有一个自己的目录，一般该目录以用户账号命名
- ==root==：该目录为系统管理员的主目录
- ==etc==：所有的系统管理所需要的配置文件和子目录
- ==usr==：用户的很多应用程序和文件都放在这个目录下，类似windows下的program files目录
- ==boot==：存放启动linux的核心文件，包括一些连接文件和镜像文件
- ==media==：linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后， linux
会把识别的设备挂载到这个目录下
- ==mnt==：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂
载在/mnt/上，然后进入该目录就可以查看里面的内容了
- ==dev==：类似于windows的设备管理器，把所有的硬件用文件的形式存储
- ==usr/local==：这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序
- ==opt==：这是给主机额外安装软件所摆放的目录。如安装ORACLE数据库就可放到该目录下。
默认为空
- ==var==：这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。
包括各种日志文件

## 远程连接linux服务器
需要linux开启sshd服务，监听22端口 

## vim的三种常见模式
### 一般/正常模式
### 编辑模式
### 命令模式
![模式间的转化](https://note.youdao.com/yws/api/personal/file/369ECC2B3B31423FB0709672B42AD1E1?method=download&shareKey=509e9021fb1b61c31cf38f76003674cd)
其中
- ==`:wq`== 表示保存并退出
- ==`:q`== 退出(一般未编辑文件时退出使用)
- ==`:q!`== 强制退出不保存

### vim快捷键
- ==`yy`==：copy当前行，yy前加数字n，表示copy当前行下面的n行，4yy表示copy当前行下面的4行(包含当前行)  
- ==`p`==：粘贴
- ==`dd`==：删除，其他同yy，也可加数字
- 查找：在命令模式下输入 ==`/关键字`==，之后回车，查找下一个按 ==`n`==
- ==`:set nu`==：设置行号
- ==`:set nonu`==：取消行号
- ==`G`==：跳到最后一行
- ==`gg`==：跳到第一行
- 跳到指定的行：
    1. 启用行号，==`:set nu`==
    2. 输入要跳至的行数
    3. 输入==`shift g`==
- ==`u`==：撤销上一步操作

## linux指令
### 开关机
- ==`shutdown -h now`==：立刻关机
- ==`shutdown -h 1`==：1分钟后关机
- ==`shutdown -r now`==：立即重启
- ==`halt`==：效果等价于关机
- ==`reboot`==：重启系统
- ==`sync`==：把内存的数据同步到磁盘，不管重启还是关机，先运行sync命令，防止数据丢失
- ==`logout`==：注销用户

### 运行级别
0：关机  
1：单用户（找回丢失密码）  
2：多用户无网络服务  
3：多用户有网络服务  
4：保留  
5：图形界面  
6：重启  
系统的运行级别配置文件在 ==`/etc/inittab`== 下  

- ==`init 级别`==：切换到指定运行级别

#### 找回root密码 
思路：进入单用户模式，然后修改root密码，因为进入单用户模式root不需要密码就可以进入  
步骤：在系统启动时不停按 ==`enter`== 键，然后按 ==`e`==，之后选择第二项==kernel...==，再输入 ==`e`==,之后空格输入 ==`1`== 后 ==`enter`==，然后输入 ==`b`==

### 帮助指令
- ==`man 命令`==：查看某指令的用法
- ==`help 命令`==：查看指令帮助信息

### 文件目录类
#### 显示查看
- ==`pwd`==：显示当前工作目录的绝对路径

- ==`ls [选项] [目录或文件]`==：显示文件或目录，常用选项有：==`-a`== 显示所有文件和目录，包括隐藏的，==`-l`== 以列表形式显示

- ==`cat [选项] 要查看的文件`==：以只读方式查看文件内容，常用选项 ==`-n`== 显示行号，当文件较长时，使用 ==`cat -n 要查看的文件 | more`== 分页显示

- ==`more 要查看的文件`==：以全屏幕的方式按页显示文本文件的内容
    1. ==`空格`==：向下翻页
    2. ==`enter`==：向下翻一行
    3. ==`q`==：立刻离开more，不再显示该文件内容
    4. ==`ctrl + F`==：向下滚动一屏
    5. ==`ctrl + B`==：返回上一屏
    6. ==`=`==：输出当前行的行号
    7. ==`:f`==：输出文件名和当前行的行号
    

- ==`less 要查看的文件`==：分屏查看文件内容，比more更强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，==对于显示大型文件具有较高的效率==
    1. ==`空格`==：向下翻页
    2. ==`[pagedown]`==：向下翻页
    3. ==`[pageup]`==：向上翻页
    4. ==`/字串`==：向下搜索字串，==`n`==：向下查找，==`N`==：向上查找
    5. ==`?字串`==：向上搜寻字串的功能；==`n`==：向上查找； ==`N`==：向下查找
    6. ==`q`==：离开less程序

- ==`echo [选项] [输出内容]`==：输出内容到控制台

- ==`head 文件`==：查看文件头10行的内容(默认)
- ==`head -n 5 文件`==：查看文件头5行的内容
- ==`tail 文件`==：查看文件尾10行内容(默认)
- ==`tail -n 5 文件`==：查看文件尾5行的内容
- ==`tail -f 文件`==：==实时追踪该文档的所有更新==

#### 删除
- ==`rmdir [选项] 要删除的空目录`==：删除空目录，若目录下有内容无法删除
- ==`rm -rf 要删除的目录`==：删除非空目录
- ==`rm [选项] 要删除的文件或目录`==：删除文件或目录，常用选项 ==`-r`== 递归删除整个文件夹,==`-f`== 强制删除不提示

#### 新建
- ==`mkdir [选项] 要创建的目录`==：创建目录，常用选项有 ==`-p`== 创建多级目录
- ==`touch 文件名称1 文件名称2 ...`==：创建空文件，可创建多个

#### 复制
- ==`cp [选项] 源文件 目的文件`==：常用选项 ==`-r`== 递归复制整个文件夹，在cp指令前加上==`\`==表示强制覆盖，即目的文件夹中已有同名的文件夹直接覆盖

#### 移动
- ==`mv `==：移动文件或重命名
    1. ==`mv 原文件名 新文件名`==：重命名
    2. ==`mv 原位置 新位置`==：移动文件

#### >和>>指令
\>输出重定向(覆盖原内容)，>>追加
1. ==`ls -l > 文件`==：将 ==`ls -l`== 显示的内容写入文件中(覆盖写)
2. ==`ls -al >> 文件`==：将 ==`ls -al`== 显示的内容追加到文件末尾
3. ==`cat 文件1 > 文件2`==：文件1的内容覆盖到文件2
4. ==`echo "内容" >> 文件`==：将内容追加到文件末尾

#### ln指令
软链接(符号链接)，类似于windows里的快捷方式， 主要存放了链接其他文件的路径  
==`ln -s [原文件或目录] [软链接名]`==：给原文件创建软链接

#### history指令
- ==`history`==：查看已经执行过的历史命令
- ==`history 5`==：查看已经执行过最近5条历史命令
- ==`!n`==：其中n为数字，表示执行历史记录中第n条指令

### 时间日期类
#### 显示
- ==`date`==：显示当前时间
- ==`date +%Y`==：显示当前年份
- ==`date +%m`==：显示当前月份
- ==`date +%d`==：显示当前是哪一天
- ==`date "+%Y-%m-%d %H:%M:%S"`==：显示年月日时分秒
- ==`cal`==：显示日历
- ==`cal 2018`==:显示2018年的所有日历

#### 设置
- ==`date -s 字符串时间`==：设置日期

### 搜索查找类
#### find指令
从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端  
==`find [搜索范围] [选项]`==   
其中选项有:  
- ==`-name 文件名`==： 按照指定的文件名查找模式查找文件
- ==`-user 用户名`==： 查找属于指定用户名所有文件
- ==`-size 文件大小`==： 按照指定的文件大小查找文件
- ==`-size +20M`==： 查找大于20M的文件
- ==`-size -20M`==： 查找小于20M的文件
- ==`-size 20M`==： 查找等于20M的文件

#### locate指令
- 快速定位文件路径  
- locate指令利用事先建立的系统中所有文件名称及路径的locate数据库实现快速定位给定的文件
- locate指令无需遍历整个文件系统，查询速度较快
- 为了保证查询结果的准确度，管理员必须定期更新locate时刻
- 由于locate指令基于数据库进行查询，所以第一次运行前，必须使用updatedb指令创建locate数据库  
==`locate 搜索的文件`==

#### grep指令
过滤查找，管道符，“|”，表示将前一个命令的处理结果输出传递给后面的命令处理  
==`grep [选项] 查找内容 源文件`==  
其中选项有：
- ==`-n`==：显示匹配行及行号
- ==`-i`==：忽略字母大小写

==`cat hello.txt | grep -in yes`==：查找hello.txt中的yes

### 压缩和解压类
#### gzip和gunzip指令
- ==`gzip 文件`==：压缩文件，只能压缩为*.gz文件，不保留源文件
- ==`gunzip 文件.gz`==：解压缩文件

#### zip和unzip指令
- ==`zip [选项] XXX.zip 要压缩的内容`==：压缩，常用选项 ==`-r`== 递归压缩，即压缩成目录
- ==`zip -r mypackage.zip /home/`==：将home目录下所有文件压缩成mypackage.zip文件
- ==`unzip [选项] XXX.zip`==：解压缩，常用选项 ==`-d 目录`== 指定解压后的文件存放目录

#### tar指令
打包，最后打包的文件是.tar.gz文件
- ==`tar [选项] XXX.tar.gz 打包的内容`==：打包目录，常用选项：
    - ==`-c`== ：产生.tar打包文件
    - ==`-v`== ：显示详细信息
    - ==`-f`== ：指定压缩后的文件名
    - ==`-z`== ：打包同时压缩
    - ==`-x`== ：解包.tar文件

- ==`tar -zcvf a.tar.gz a1.txt a2.txt`==：将a1.txt和a2.txt压缩到a.tar.gz中
- ==`tar -zxvf a.tar.gz`==：解压a.tar.gz到当前目录
- ==`tar -zxvf a.tar.gz -C /opt/`==：解压a.tar.gz到opt目录，指定的目录必需存在


















