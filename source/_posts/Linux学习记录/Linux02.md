---
title: Linux学习记录02
date: 2018-09-03 14:17:28
description: 文章访问需要密码
password: llz721097
categories: 
    - Linux
tags: 
    - Linux
---
# 组管理和权限管理
## 用户和组
### 用户管理
- ==`useradd [选项]  用户名`==：添加用户，创建用户成功后会自动创建和用户同名的家目录（不指定用户组的情况下）
- ==`useradd -g 用户组 用户名`==：添加用户同时指定该用户所在的用户组
- ==`useradd -d 指定目录 用户名`==：添加用户并指定家目录
- ==`passwd 用户名`==：给用户指定密码
- ==`userdel 用户名`==：删除用户保留家目录
- ==`userdel -r 用户名`==：删除用户和家目录
- ==`id 用户名`==：查看用户信息
- ==`su - 用户名`==：切换用户
- ==`exit`==：退出当前用户，返回上一个用户
- ==`whoami`==：查看当前是哪个用户

### 用户组
类似角色，系统可以对有共性的多个用户进行统一管理
- ==`groupadd 组名`==：添加一个用户组
- ==`groupdel 组名`==：删除组
- ==`usermod -g 用户组 用户名`==：修改用户组
- ==`usermod -d 目录名 用户名`==：修改用户登录的初始目录


### 用户和组相关文件
- 用户配置文件(用户信息)，==`/etc/passwd`==，其中每行含义：==`用户名：口令：用户标识号：组标识号：注释性描述：家目录：登录shell`==
- 组配置文件(组信息)，==`/etc/group`==，其中每行含义：==`组名：口令：组标识号：组内用户列表`==
- 口令配置文件(密码和登录信息，加密)，==`/etc/shadow`==，其中每行含义：==`登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志`==

### 查看文件所有者  
==`ls -ahl`==：其中a表示全部，h表示以人易理解的格式列出文件大小，l表示除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来

### 修改文件所有者和所在组
- ==`chown [选项] 用户名 文件名`==：修改文件所有者
- ==`chgrp [选项] 组名 文件名`==：修改文件所在组
- ==`chown [选项] 用户名:组名 文件名`==：同时改变文件所有者和所在组

其中选项 ==-R== 如果是目录，则使其下所有子文件或目录递归生效

## 权限
==`ls -l`== 中显示的内容如下：  
> -rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc

- 第0位：确定文件类型，-表示普通文件，d表示目录，l表示软链接，c表示字符设备(如键盘，鼠标)，b表示块文件(如硬盘)
- 1-3位：表示文件所有者的权限，r表示读，w表示写，x(execute)表示可执行
- 4-6位：表示文件所在组的权限
- 7-9位：表示文件其他组的用户的权限
- 权限后的1如果是文件，表示硬链接的数，如果是目录则表示该目录的子目录个数
- 第一个root表示文件的所有者
- 第二个root表示文件所在组
- 1213表示文件大小，单位字节，如果是目录，则大小显示为4096

### rwx权限详解
#### rwx作用于文件
- ==r== ：可读(read)
- ==w== ：可写(write)，可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件.
- ==x== ：可执行(execute):可以被执行

#### rwx作用于目录
- ==r== ：可读(read)，可以读取， ls查看目录内容
- ==w== ：可写(write)，可以修改，目录内创建+删除+重命名目录
- ==x== ：可执行(execute)，可以进入该目录

### 修改权限
==chmod==指令用于修改文件或目录权限
#### 方一：+，-，=变更权限
> u：所有者  
g：所在组  
o：其他人  
a：所有人(u,g,o总和)

- ==`chmod u=rwx,g=rx,o=x 文件目录名`==：给该文件或目录所有者赋权限rwx，所在组赋权限rx，其他人赋权限x
- ==`chmod o+w 文件目录名`==：给该文件或目录其他人添加权限w
- ==`chmod a-x 文件目录名`==：给该文件或目录所有人去掉权限x

#### 方二：通过数字变更权限
> r = 4  
w = 2  
x = 1  
rwx = 4 + 2 + 1 = 7  

==`chmod 751 文件目录名`== 等价于 ==`chmod u=rwx,g=rx,o=x 文件目录名`==

# crond任务调度
## 任务调度
系统在某个时间执行的特定的命令或程序  

## 分类
1. 系统工作：有些重要的工作必须周而复始地执行。如病毒扫描等  
2. 个别用户工作：个别用户可能希望执行某些程序，比如对mysql数据库的备份

> crontab [选项]

常用选项：
- ==-e==：编辑crontab定时任务
- ==-l==：查询crontab任务
- ==-r==：删除当前用户所有的crontab任务

![](https://note.youdao.com/yws/api/personal/file/088880AB4D0D40518C76431EB894E6A5?method=download&shareKey=77b591189f3d496de95289d4ce682a7a)


![](https://note.youdao.com/yws/api/personal/file/057FE3D11C93408C901D2EF977493BDE?method=download&shareKey=8a6bd02ce8d3544e9a76bdfc494ab324)

![](https://note.youdao.com/yws/api/personal/file/AA31E33F23514DBB96DF2CBC7EF4F77A?method=download&shareKey=05ce7a11edb74614eeec2b1e6cd6a191)

## 重启任务调度
==service crond restart==

# 磁盘分区和挂载
## 分区
- mbr分区
    1. 最多支持四个主分区
    2. 系统只能安装在主分区
    3. 扩展分区要占一个主分区
    4. MBR最大只支持2TB，但拥有最好的兼容性
- gpt分区
    1. 支持无限多个主分区（但操作系统可能限制，比如 windows下最多128个分区）
    2. 最大支持18EB的大容量（1EB=1024 PB， 1PB=1024 TB ）
    3. windows7 64位以后支持gpt

## 硬盘说明
- linux硬盘分为IDE硬盘和SCSI硬盘
- IDE硬盘的驱动器标识符为 ==hdx~==
    - ==hd==:分区所在设备类型，hd表示IDE硬盘
    - ==x==：盘号，a为第一个硬盘，b为第二个，以此类推
    - ==~==：分区，前4个分区用1-4表示，为主分区或扩展分区，5及以后为逻辑分区
- SCSI硬盘标识为 ==sdx~==

### 查看当前系统分区情况
> lsblk -f

![](https://note.youdao.com/yws/api/personal/file/A7D44786D0524495B91378341465CE0A?method=download&shareKey=5a6fd7cd6c3a56fb94f0f2039fa4c6d9)





